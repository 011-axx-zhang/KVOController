# [FBKVOController](https://github.com/facebook/FBKVOController)

FBKVOController makes key-value observing simpler and safer. Benefits include:

- Notification using blocks, custom actions, or the default NSKeyValueObserving callback.
- No exceptions on observer removal.
- Implicit removal of observers on controller dealloc.
- Improved performance when using NSKeyValueObservingInitial.
- Threadsafe usage and protection from possible observer resurection â€“ [rdar://15985376](http://openradar.appspot.com/radar?id=5305010728468480).

For more information on KVO, see Apple's [Introduction to Key-Value Observing](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html).

## Usage

Example apps for iOS and OS X are included with the project. Here is one simple usage pattern:

```objective-c
// create KVO controller with observer
FBKVOController *KVOController = [FBKVOController controllerWithObserver:self];

// observe clock date property 
[KVOController observe:clock keyPath:@"date" options:NSKeyValueObservingOptionInitial|NSKeyValueObservingOptionNew block:^(ClockView *clockView, Clock *clock, NSDictionary *change) {

  // update clock view with new value
  clockView.date = change[NSKeyValueChangeNewKey];
}];
```

While simple, the above example is complete. A clock view creates a KVO controller to observe the clock date property. A block callback is used to handle initial and change notification. Unobservation happens implicitely on controller deallocation.

## Prerequisites

FBKVOController takes advantage of recent Objective-C runtime advances, including ARC and weak collections. It requires:

- iOS 6 or later.
- OS X 10.7 or later.

## Installation

You can install FBKVOController two ways. Simply drag and drop FBKVOController.h and FBKVOControler.m into your Xcode project, agreeing to copy files if needed. Alternatively, you can use the iOS static lib generated by the FBKCOController Xcode project. Add the project to your workspace and link your application to libFBKVOController.lib.

## Testing

The unit tests included use CocoaPods for managing depenendecies. Install CocoaPods if you haven't already done so. Then, at the command line, navigate to the root FBKVOController directory and type:

```sh
pod install
```

Re-open the Xcode FBKVOController workspace and run Product -> Test.

## Licence

FBKVOController is released under the BSD License except as otherwise noted.
